<!DOCTYPE html>
<html>
    <script src="//d3js.org/d3.v3.min.js"></script>
    <script src="lib/plotly.js" charset="utf-8"></script>
<body>

<div id="myDiv" style="width:100%;max-width:2700px"></div>

<script>
// const xArray = ["Italy", "France", "Spain", "USA", "Argentina"];
// const yArray = [55, 49, 44, 24, 15];

// const data = [{
//   x:xArray,
//   y:yArray,
//   type:"bar",
//   orientation:"v",
//   marker: {color:"rgba(0,0,255,0.6)"}
// }];

// const layout = {title:"World Wide Wine Production"};

// Plotly.newPlot("myDiv", data, layout);


// var data = [{
//   type: "sankey",
//     arrangement: "snap",
//     node:{
//         label: ["A", "B", "C", "D", "E", "F"],
//         x: [0.2, 0.1, 0.5, 0.7, 0.3, 0.5],
//         y: [0.7, 0.5, 0.2, 0.4, 0.2, 0.3],
//         pad:10}, // 10 Pixels
//     link: {
//         source: [0, 0, 1, 2, 5, 4, 3, 5],
//         target: [5, 3, 4, 3, 0, 2, 2, 3],
//         value: [1, 2, 1, 1, 1, 1, 1, 2]}
//     }]

// var layout = {"title": "Sankey with manually positioned node"}

// Plotly.newPlot('myDiv', data, layout);

var json = {
    "data": [
        {
            "type": "sankey",
            "domain": {
                "x": [
                    0,
                    1
                ],
                "y": [
                    0,
                    1
                ]
            },
            "orientation": "v",
            "valueformat": ".0f",
            "valuesuffix": "TWh",
            "node": {
                "pad": 15,
                "thickness": 15,
                "line": {
                    "color": "black",
                    "width": 0.5
                },
                "label": [
                    "Agricultural 'waste'",
                    "Bio-conversion",
                    "Liquid",
                    "Losses",
                    "Solid",
                    "Gas",
                    "Biofuel imports",
                    "Biomass imports",
                    "Coal imports",
                    "Coal",
                    "Coal reserves",
                    "District heating",
                    "Industry",
                    "Heating and cooling - commercial",
                    "Heating and cooling - homes",
                    "Electricity grid",
                    "Over generation / exports",
                    "H2 conversion",
                    "Road transport",
                    "Agriculture",
                    "Rail transport",
                    "Lighting & appliances - commercial",
                    "Lighting & appliances - homes",
                    "Gas imports",
                    "Ngas",
                    "Gas reserves",
                    "Thermal generation",
                    "Geothermal",
                    "H2",
                    "Hydro",
                    "International shipping",
                    "Domestic aviation",
                    "International aviation",
                    "National navigation",
                    "Marine algae",
                    "Nuclear",
                    "Oil imports",
                    "Oil",
                    "Oil reserves",
                    "Other waste",
                    "Pumped heat",
                    "Solar PV",
                    "Solar Thermal",
                    "Solar",
                    "Tidal",
                    "UK land based bioenergy",
                    "Wave",
                    "Wind"
                ]
            },
            "link": {
                "source": [
                    0,
                    1,
                    1,
                    1,
                    1,
                    6,
                    7,
                    8,
                    10,
                    9,
                    11,
                    11,
                    11,
                    15,
                    15,
                    15,
                    15,
                    15,
                    15,
                    15,
                    15,
                    15,
                    15,
                    15,
                    23,
                    25,
                    5,
                    5,
                    5,
                    5,
                    5,
                    27,
                    17,
                    17,
                    28,
                    29,
                    2,
                    2,
                    2,
                    2,
                    2,
                    2,
                    2,
                    2,
                    34,
                    24,
                    35,
                    35,
                    36,
                    38,
                    37,
                    39,
                    39,
                    40,
                    40,
                    41,
                    42,
                    43,
                    43,
                    4,
                    4,
                    4,
                    26,
                    26,
                    26,
                    44,
                    45,
                    46,
                    47
                ],
                "target": [
                    1,
                    2,
                    3,
                    4,
                    5,
                    2,
                    4,
                    9,
                    9,
                    4,
                    12,
                    13,
                    14,
                    16,
                    14,
                    17,
                    12,
                    18,
                    19,
                    13,
                    3,
                    20,
                    21,
                    22,
                    24,
                    24,
                    13,
                    3,
                    26,
                    19,
                    12,
                    15,
                    28,
                    3,
                    18,
                    15,
                    12,
                    30,
                    18,
                    31,
                    32,
                    19,
                    33,
                    20,
                    1,
                    5,
                    26,
                    26,
                    37,
                    37,
                    2,
                    4,
                    1,
                    14,
                    13,
                    15,
                    14,
                    42,
                    41,
                    19,
                    26,
                    12,
                    15,
                    3,
                    11,
                    15,
                    1,
                    15,
                    15
                ],
                "value": [
                    124.729,
                    0.597,
                    26.862,
                    280.322,
                    81.144,
                    35,
                    35,
                    11.606,
                    63.965,
                    75.571,
                    10.639,
                    22.505,
                    46.184,
                    104.453,
                    113.726,
                    27.14,
                    342.165,
                    37.797,
                    4.412,
                    40.858,
                    56.691,
                    7.863,
                    90.008,
                    93.494,
                    40.719,
                    82.233,
                    0.129,
                    1.401,
                    151.891,
                    2.096,
                    48.58,
                    7.013,
                    20.897,
                    6.242,
                    20.897,
                    6.995,
                    121.066,
                    128.69,
                    135.835,
                    14.458,
                    206.267,
                    3.64,
                    33.218,
                    4.413,
                    14.375,
                    122.952,
                    500,
                    339.978,
                    504.287,
                    107.703,
                    611.99,
                    56.587,
                    77.81,
                    193.026,
                    70.672,
                    59.901,
                    19.263,
                    19.263,
                    59.901,
                    0.882,
                    400.12,
                    46.477,
                    525.531,
                    787.129,
                    79.329,
                    9.452,
                    182.01,
                    19.013,
                    289.366
                ],
                "label": [
                    "stream 1",
                    "",
                    "",
                    "",
                    "stream 1",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "stream 1",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "Old generation plant (made-up)",
                    "New generation plant (made-up)",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    ""
                ]
            }
        }],
};
d3.json(json, function(){
var data = {
  type: "sankey",
  domain: {
    x: [0,1],
    y: [0,1]
  },
  orientation: "h",
  valueformat: ".0f",
  valuesuffix: "TWh",
  node: {
    pad: 15,
    thickness: 15,
    line: {
      color: "black",
      width: 0.5
    },
   label: json.data[0].node.label,
   color: json.data[0].node.color
      },
  link: {
    source: json.data[0].link.source,
    target: json.data[0].link.target,
    value: json.data[0].link.value,
    label: json.data[0].link.label
  }
}

var data = [data]

var layout = {
  title: "Energy forecast for 2050<br>Source: Department of Energy & Climate Change, Tom Counsell via <a href='https://bost.ocks.org/mike/sankey/'>Mike Bostock</a>",
  width: 1118,
  height: 772,
  font: {
    size: 10,
    color: 'white'
  },
  plot_bgcolor: 'black',
  paper_bgcolor: 'black'
}

Plotly.newPlot('myDiv', data, layout)
})
</script>

</body>
</html>